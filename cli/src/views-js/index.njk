// Auto-generated by N1mbly Client CLI
import { N1mblyContainer{% if isServer %}, N1mblyApi{% endif %} } from '@n1mbly/{% if isServer %}api{% else %}client{% endif %}';
{% for service in services %}import { {{ service.name }} as {{service.name}}Local } from './{{ service.name }}';{% endfor %}

{% if host %}const host = "{{ host }}";{% endif %}


const nimble = new N1mblyContainer()
{% for service in services %}
{% if host %}.addRemoteService(host, {{ service.name }}Local){% else %}.addLocalService({{ service.name }}Local){% endif %}
{% endfor %};

export const {
  {% for service in services %}{{ service.name.charAt(0).toLowerCase() + service.name.slice(1) }},
  {% endfor %}
} = nimble.getAllServices();

{% if isServer %}
const app = new N1mblyApi().from(nimble);

app.listen(3000, () => console.log("App is listening on port 3000"));
{% endif %}